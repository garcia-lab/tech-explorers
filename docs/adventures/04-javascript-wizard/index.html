<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° Adventure 4: JavaScript Wizard - Tech Explorers</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/adventure.css">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Varela+Round&family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="../../assets/js/project-storage.js"></script>
    <style>
        /* JavaScript Wizard specific styles */
        .demo-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 25px 0;
        }
        
        .magic-btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .magic-btn:hover {
            transform: scale(1.1);
        }
        
        .magic-btn.color {
            background: linear-gradient(135deg, #f72585, #7209b7);
            color: white;
        }
        
        .magic-btn.size {
            background: linear-gradient(135deg, #4361ee, #3a0ca3);
            color: white;
        }
        
        .magic-btn.hide {
            background: linear-gradient(135deg, #06d6a0, #4361ee);
            color: white;
        }
        
        #magic-box {
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, #ffd166, #f72585);
            border-radius: 20px;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            transition: all 0.5s;
        }
        
        .click-counter {
            text-align: center;
            margin: 30px 0;
        }
        
        #click-count {
            font-size: 5rem;
            color: #4361ee;
            font-weight: bold;
        }
        
        .counter-btn {
            background: linear-gradient(135deg, #f72585, #7209b7);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .counter-btn:hover {
            transform: scale(1.1);
        }
        
        .counter-btn:active {
            transform: scale(0.95);
        }
        
        /* Name greeter */
        .name-form {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        #name-input {
            padding: 15px 25px;
            font-size: 1.2rem;
            border: 3px solid #4361ee;
            border-radius: 25px;
            outline: none;
            min-width: 250px;
        }
        
        #name-input:focus {
            border-color: #f72585;
        }
        
        .greet-btn {
            background: #06d6a0;
            color: white;
            border: none;
            padding: 15px 35px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .greet-btn:hover {
            transform: scale(1.05);
            background: #05b389;
        }
        
        #greeting-output {
            font-size: 2rem;
            color: #7209b7;
            margin-top: 20px;
            min-height: 50px;
        }
        
        /* Quiz game */
        .quiz-game {
            background: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
        }
        
        #quiz-question {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 25px;
        }
        
        .quiz-options {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .quiz-btn {
            background: #f8f9fa;
            border: 3px solid #ddd;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 80px;
        }
        
        .quiz-btn:hover {
            border-color: #4361ee;
            background: rgba(67, 97, 238, 0.1);
        }
        
        .quiz-btn.correct {
            background: #06d6a0;
            border-color: #06d6a0;
            color: white;
        }
        
        .quiz-btn.wrong {
            background: #ef476f;
            border-color: #ef476f;
            color: white;
        }
        
        #quiz-result {
            font-size: 1.5rem;
            margin-top: 20px;
            min-height: 40px;
        }
        
        #quiz-score {
            font-size: 1.2rem;
            color: #666;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="adventure-nav">
        <a href="../../index.html" class="nav-home">
            <i class="fas fa-home"></i> Home
        </a>
        <div class="nav-progress">
            <span class="progress-dot completed"></span>
            <span class="progress-dot completed"></span>
            <span class="progress-dot completed"></span>
            <span class="progress-dot active"></span>
            <span class="progress-dot"></span>
        </div>
        <div class="nav-title">Adventure 4 of 5</div>
    </nav>

    <!-- Hero -->
    <header class="adventure-hero" style="background: linear-gradient(135deg, #f7df1e, #f72585);">
        <div class="hero-content">
            <div class="adventure-badge">Adventure 4</div>
            <h1>‚ö° JavaScript Wizard</h1>
            <p class="hero-subtitle">Make things happen with the magic of code!</p>
            <div class="time-estimate">
                <i class="fas fa-clock"></i> About 20 minutes
            </div>
        </div>
    </header>

    <!-- Learning Objectives -->
    <section class="objectives-section">
        <div class="container">
            <h2>üéØ What You'll Learn</h2>
            <div class="objectives-grid">
                <div class="objective-card">
                    <div class="objective-icon">‚ö°</div>
                    <p>What is JavaScript?</p>
                </div>
                <div class="objective-card">
                    <div class="objective-icon">üñ±Ô∏è</div>
                    <p>Make buttons do things</p>
                </div>
                <div class="objective-card">
                    <div class="objective-icon">üéÆ</div>
                    <p>Build interactive stuff!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="adventure-content">
        <div class="container">
            
            <!-- Step 1 -->
            <section class="lesson-step" id="step1">
                <div class="step-header">
                    <div class="step-number">1</div>
                    <h2>What is JavaScript?</h2>
                </div>
                
                <div class="step-content">
                    <div class="fun-fact">
                        <div class="fun-fact-icon">‚ú®</div>
                        <div class="fun-fact-content">
                            <strong>JavaScript is MAGIC for websites!</strong>
                            <p>It makes things move, click, change, and come alive!</p>
                        </div>
                    </div>

                    <div class="analogy-box">
                        <div class="analogy-icon">üè† ‚û°Ô∏è üè†üí°</div>
                        <div class="analogy-content">
                            <p><strong>Think about it like this:</strong></p>
                            <p>HTML = The house (structure)</p>
                            <p>CSS = The paint and decorations (style)</p>
                            <p>JavaScript = The electricity! (makes things WORK)</p>
                        </div>
                    </div>

                    <div class="interactive-box">
                        <h3>‚ö° Watch JavaScript in Action!</h3>
                        <p>Click these buttons to see JavaScript magic:</p>
                        
                        <div class="demo-buttons">
                            <button class="magic-btn color" onclick="changeBoxColor()">üé® Change Color</button>
                            <button class="magic-btn size" onclick="changeBoxSize()">üìê Change Size</button>
                            <button class="magic-btn hide" onclick="toggleBox()">üëÄ Hide/Show</button>
                        </div>
                        
                        <div id="magic-box">‚ú®</div>
                    </div>

                    <div class="checkpoint">
                        <input type="checkbox" id="check1" class="checkpoint-check">
                        <label for="check1">
                            <i class="fas fa-check-circle"></i>
                            I saw JavaScript in action!
                        </label>
                    </div>
                </div>
            </section>

            <!-- Step 2 -->
            <section class="lesson-step" id="step2">
                <div class="step-header">
                    <div class="step-number">2</div>
                    <h2>Let's Make a Click Counter!</h2>
                </div>
                
                <div class="step-content">
                    <p class="big-text">
                        One of the coolest things JavaScript can do is <strong>count</strong> and <strong>remember</strong> things!
                    </p>

                    <div class="interactive-box">
                        <h3>üî¢ Click Counter Challenge</h3>
                        <p>How many times can you click the button in 10 seconds?</p>
                        
                        <div class="click-counter">
                            <div id="click-count">0</div>
                            <button class="counter-btn" onclick="incrementCounter()">
                                üëÜ Click Me!
                            </button>
                            <p style="margin-top: 20px; color: #666;">
                                <button onclick="resetCounter()" style="background: #666; color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer;">
                                    üîÑ Reset Counter
                                </button>
                            </p>
                        </div>
                    </div>

                    <div class="fun-fact">
                        <div class="fun-fact-icon">üíª</div>
                        <div class="fun-fact-content">
                            <strong>Here's the code that makes it work:</strong>
                            <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 10px; margin-top: 10px; font-family: 'Fira Code', monospace; font-size: 0.9rem; overflow-x: auto;">
<span style="color: #66d9ef;">let</span> count = <span style="color: #ae81ff;">0</span>;

<span style="color: #66d9ef;">function</span> <span style="color: #a6e22e;">incrementCounter</span>() {
    count = count + <span style="color: #ae81ff;">1</span>;
    <span style="color: #888;">// Show the new count</span>
}</pre>
                        </div>
                    </div>

                    <div class="checkpoint">
                        <input type="checkbox" id="check2" class="checkpoint-check">
                        <label for="check2">
                            <i class="fas fa-check-circle"></i>
                            I made the counter go up!
                        </label>
                    </div>
                </div>
            </section>

            <!-- Step 3 -->
            <section class="lesson-step" id="step3">
                <div class="step-header">
                    <div class="step-number">3</div>
                    <h2>Make a Personal Greeter!</h2>
                </div>
                
                <div class="step-content">
                    <p class="big-text">
                        JavaScript can read what you type and respond to it!
                    </p>

                    <div class="interactive-box">
                        <h3>üëã Hello, Friend!</h3>
                        <p>Type your name and click the button:</p>
                        
                        <div class="name-form">
                            <input type="text" id="name-input" placeholder="Type your name here...">
                            <button class="greet-btn" onclick="greetUser()">
                                Say Hello! üëã
                            </button>
                        </div>
                        
                        <div id="greeting-output"></div>
                    </div>

                    <div class="fun-fact">
                        <div class="fun-fact-icon">üîÆ</div>
                        <div class="fun-fact-content">
                            <strong>The magic behind it:</strong>
                            <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 10px; margin-top: 10px; font-family: 'Fira Code', monospace; font-size: 0.9rem; overflow-x: auto;">
<span style="color: #66d9ef;">function</span> <span style="color: #a6e22e;">greetUser</span>() {
    <span style="color: #66d9ef;">let</span> name = <span style="color: #888;">/* get from input */</span>
    <span style="color: #66d9ef;">alert</span>(<span style="color: #e6db74;">"Hello, "</span> + name + <span style="color: #e6db74;">"!"</span>);
}</pre>
                        </div>
                    </div>

                    <div class="checkpoint">
                        <input type="checkbox" id="check3" class="checkpoint-check">
                        <label for="check3">
                            <i class="fas fa-check-circle"></i>
                            The computer said hello to me!
                        </label>
                    </div>
                </div>
            </section>

            <!-- Step 4 - Mini Game -->
            <section class="lesson-step" id="step4">
                <div class="step-header">
                    <div class="step-number">4</div>
                    <h2>‚≠ê Bonus: Math Quiz Game!</h2>
                </div>
                
                <div class="step-content">
                    <p class="big-text">
                        Let's play a game I built with JavaScript! Can you answer the math questions?
                    </p>

                    <div class="interactive-box">
                        <div class="quiz-game">
                            <h3>üßÆ Quick Math!</h3>
                            <p id="quiz-question">Loading question...</p>
                            
                            <div class="quiz-options" id="quiz-options">
                                <!-- Options will be inserted by JavaScript -->
                            </div>
                            
                            <p id="quiz-result"></p>
                            <p id="quiz-score">Score: 0</p>
                            
                            <button onclick="generateQuestion()" style="margin-top: 20px; background: #4361ee; color: white; border: none; padding: 12px 25px; border-radius: 20px; cursor: pointer; font-weight: bold;">
                                üîÑ New Question
                            </button>
                        </div>
                    </div>

                    <div class="challenge-box">
                        <h3>üèÜ Super Challenge!</h3>
                        <p>Can you score 5 correct answers in a row?</p>
                        <p style="opacity: 0.8; font-size: 0.9rem; margin-top: 15px;">
                            üí° Games like this are made with JavaScript! You could make your own someday!
                        </p>
                    </div>

                    <div class="checkpoint">
                        <input type="checkbox" id="check4" class="checkpoint-check">
                        <label for="check4">
                            <i class="fas fa-check-circle"></i>
                            I played the JavaScript game!
                        </label>
                    </div>
                </div>
            </section>

            <!-- Step 5: NEW - Variable Explorer -->
            <section class="lesson-step" id="step5">
                <div class="step-header">
                    <div class="step-number">5</div>
                    <h2>üì¶ Variable Adventure!</h2>
                </div>
                
                <div class="step-content">
                    <div class="fun-fact">
                        <div class="fun-fact-icon">üì¶</div>
                        <div class="fun-fact-content">
                            <strong>Variables are like labeled boxes!</strong>
                            <p>They store information that your program can use later.</p>
                        </div>
                    </div>

                    <div class="interactive-box" style="background: linear-gradient(135deg, #4361ee, #7209b7); color: white; border-radius: 20px; padding: 25px;">
                        <h3 style="color: white;">üì¶ Create Your Own Variables!</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: bold;">Variable Name:</label>
                                <input type="text" id="var-name" value="myAge" oninput="updateVariable()" style="width: 100%; padding: 12px; border: none; border-radius: 10px; font-family: 'Fira Code', monospace;">
                                
                                <label style="display: block; margin: 15px 0 8px; font-weight: bold;">Variable Value:</label>
                                <input type="text" id="var-value" value="10" oninput="updateVariable()" style="width: 100%; padding: 12px; border: none; border-radius: 10px; font-family: 'Fira Code', monospace;">
                            </div>
                            
                            <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 15px;">
                                <p style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 10px;">Your JavaScript Code:</p>
                                <code id="var-code" style="font-family: 'Fira Code', monospace; font-size: 1.1rem; color: #06d6a0;">let myAge = 10;</code>
                                <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.2);">
                                    <p style="font-size: 0.9rem; opacity: 0.8;">The box contains:</p>
                                    <div id="var-box" style="background: #ffd166; color: #333; padding: 15px; border-radius: 10px; font-size: 1.5rem; font-weight: bold; text-align: center; margin-top: 10px;">10</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px;">
                            <p style="font-size: 0.9rem; opacity: 0.8;">Quick examples:</p>
                            <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                                <button onclick="setVariable('playerName', '&quot;Alex&quot;')" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 8px 15px; border-radius: 15px; cursor: pointer;">playerName = "Alex"</button>
                                <button onclick="setVariable('score', '100')" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 8px 15px; border-radius: 15px; cursor: pointer;">score = 100</button>
                                <button onclick="setVariable('isWinner', 'true')" style="background: rgba(255,255,255,0.2); color: white; border: none; padding: 8px 15px; border-radius: 15px; cursor: pointer;">isWinner = true</button>
                            </div>
                        </div>
                    </div>

                    <div class="checkpoint">
                        <input type="checkbox" id="check5" class="checkpoint-check">
                        <label for="check5">
                            <i class="fas fa-check-circle"></i>
                            I understand variables!
                        </label>
                    </div>
                </div>
            </section>

            <!-- Step 6: NEW - Event Detector Game -->
            <section class="lesson-step" id="step6">
                <div class="step-header">
                    <div class="step-number">6</div>
                    <h2>üéØ Event Detector Challenge!</h2>
                </div>
                
                <div class="step-content">
                    <p class="big-text">
                        JavaScript listens for <strong>events</strong> - things that happen on a webpage!
                    </p>

                    <div class="interactive-box" style="background: linear-gradient(135deg, #f72585, #7209b7); color: white; border-radius: 20px; padding: 25px;">
                        <h3 style="color: white;">üéÆ Trigger Different Events!</h3>
                        <p>Perform the actions below to score points!</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0;">
                            <div id="event-click" class="event-box" style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 15px; text-align: center; cursor: pointer; transition: all 0.3s;">
                                <div style="font-size: 2rem;">üñ±Ô∏è</div>
                                <div style="font-weight: bold; margin: 10px 0;">Click Event</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Click this box!</div>
                                <div class="event-status" style="margin-top: 10px;">‚¨ú Not triggered</div>
                            </div>
                            
                            <div id="event-double" class="event-box" style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 15px; text-align: center; cursor: pointer; transition: all 0.3s;">
                                <div style="font-size: 2rem;">üëÜüëÜ</div>
                                <div style="font-weight: bold; margin: 10px 0;">Double Click</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Double-click this!</div>
                                <div class="event-status" style="margin-top: 10px;">‚¨ú Not triggered</div>
                            </div>
                            
                            <div id="event-hover" class="event-box" style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 15px; text-align: center; cursor: pointer; transition: all 0.3s;">
                                <div style="font-size: 2rem;">üéØ</div>
                                <div style="font-weight: bold; margin: 10px 0;">Hover Event</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Move your mouse here!</div>
                                <div class="event-status" style="margin-top: 10px;">‚¨ú Not triggered</div>
                            </div>
                            
                            <div id="event-key" class="event-box" style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 15px; text-align: center; cursor: pointer; transition: all 0.3s;">
                                <div style="font-size: 2rem;">‚å®Ô∏è</div>
                                <div style="font-weight: bold; margin: 10px 0;">Key Press</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Press any key!</div>
                                <div class="event-status" style="margin-top: 10px;">‚¨ú Not triggered</div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <div style="font-size: 1.5rem;">Events Triggered: <strong id="events-count">0</strong> / 4</div>
                            <div id="events-complete" style="display: none; margin-top: 15px; font-size: 1.2rem;">üéâ You triggered all events! You're an event master!</div>
                        </div>
                    </div>

                    <div class="checkpoint">
                        <input type="checkbox" id="check6" class="checkpoint-check">
                        <label for="check6">
                            <i class="fas fa-check-circle"></i>
                            I triggered all events!
                        </label>
                    </div>
                </div>
            </section>

            <!-- Step 7: NEW - Condition Builder -->
            <section class="lesson-step" id="step7">
                <div class="step-header">
                    <div class="step-number">7</div>
                    <h2>üîÄ If/Else Decision Maker!</h2>
                </div>
                
                <div class="step-content">
                    <div class="fun-fact">
                        <div class="fun-fact-icon">ü§î</div>
                        <div class="fun-fact-content">
                            <strong>Computers can make decisions!</strong>
                            <p>Using IF and ELSE, programs choose what to do based on conditions.</p>
                        </div>
                    </div>

                    <div class="interactive-box">
                        <h3>üéÆ Build Your Own Decision!</h3>
                        
                        <div style="background: #2d2d2d; border-radius: 15px; padding: 25px; color: #f8f8f2; font-family: 'Fira Code', monospace;">
                            <div style="margin-bottom: 15px;">
                                <span style="color: #66d9ef;">let</span> age = 
                                <input type="number" id="decision-age" value="12" oninput="runDecision()" style="width: 60px; padding: 5px 10px; border: none; border-radius: 5px; font-family: inherit; text-align: center;">
                                ;
                            </div>
                            
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px;">
                                <div><span style="color: #f72585;">if</span> (age >= 13) {</div>
                                <div style="padding-left: 20px; color: #06d6a0;">üéÆ "You can play teen games!"</div>
                                <div>} <span style="color: #f72585;">else if</span> (age >= 7) {</div>
                                <div style="padding-left: 20px; color: #ffd166;">üß© "You can play kid games!"</div>
                                <div>} <span style="color: #f72585;">else</span> {</div>
                                <div style="padding-left: 20px; color: #4361ee;">üë∂ "You can play toddler games!"</div>
                                <div>}</div>
                            </div>
                        </div>
                        
                        <div id="decision-result" style="background: linear-gradient(135deg, #4361ee, #7209b7); color: white; padding: 25px; border-radius: 15px; text-align: center; margin-top: 20px; font-size: 1.5rem;">
                            üß© "You can play kid games!"
                        </div>
                        
                        <div style="margin-top: 20px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                            <button onclick="setAge(5)" style="background: #4361ee; color: white; border: none; padding: 12px; border-radius: 10px; cursor: pointer;">Try age 5</button>
                            <button onclick="setAge(10)" style="background: #ffd166; color: #333; border: none; padding: 12px; border-radius: 10px; cursor: pointer;">Try age 10</button>
                            <button onclick="setAge(15)" style="background: #06d6a0; color: white; border: none; padding: 12px; border-radius: 10px; cursor: pointer;">Try age 15</button>
                        </div>
                    </div>

                    <div class="checkpoint">
                        <input type="checkbox" id="check7" class="checkpoint-check">
                        <label for="check7">
                            <i class="fas fa-check-circle"></i>
                            I understand if/else!
                        </label>
                    </div>
                </div>
            </section>

            <!-- Step 8: NEW - Mini Reaction Game -->
            <section class="lesson-step" id="step8">
                <div class="step-header">
                    <div class="step-number">8</div>
                    <h2>‚ö° Reaction Time Challenge!</h2>
                </div>
                
                <div class="step-content">
                    <p class="big-text">
                        This game tests your reaction speed - and it's built with JavaScript!
                    </p>

                    <div class="interactive-box" style="background: #1e1e1e; border-radius: 20px; padding: 25px; text-align: center;">
                        <h3 style="color: white;">‚ö° How Fast Are You?</h3>
                        <p style="color: #888;">Click the box when it turns GREEN!</p>
                        
                        <div id="reaction-box" style="width: 250px; height: 250px; background: #ef476f; border-radius: 20px; margin: 30px auto; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: background 0.1s; color: white; font-size: 1.3rem; font-weight: bold;">
                            Click to Start!
                        </div>
                        
                        <div id="reaction-result" style="color: white; font-size: 1.5rem; margin-top: 20px;"></div>
                        
                        <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                            <div style="background: rgba(255,255,255,0.1); padding: 15px 25px; border-radius: 15px; color: white;">
                                Best: <strong id="best-time">---</strong> ms
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 15px 25px; border-radius: 15px; color: white;">
                                Attempts: <strong id="reaction-attempts">0</strong>
                            </div>
                        </div>
                    </div>

                    <div class="checkpoint">
                        <input type="checkbox" id="check8" class="checkpoint-check">
                        <label for="check8">
                            <i class="fas fa-check-circle"></i>
                            I played the reaction game!
                        </label>
                    </div>
                </div>
            </section>

            <!-- Celebration -->
            <section class="celebration-section" id="celebration">
                <div class="celebration-content">
                    <div class="trophy">‚ö°</div>
                    <h2>Adventure 4 Complete!</h2>
                    <p>You've learned how to make websites interactive! You're a JavaScript Wizard!</p>
                    
                    <div class="earned-badge">
                        <div class="badge-icon">üßô‚Äç‚ôÇÔ∏è</div>
                        <div class="badge-info">
                            <strong>Badge Earned:</strong>
                            <span>JavaScript Wizard</span>
                        </div>
                    </div>

                    <div class="next-steps">
                        <h3>What's Next?</h3>
                        <p>In our <strong>Bonus Adventure</strong>, explore the exciting world of AI!</p>
                        <a href="../05-ai-explorer/index.html" class="next-adventure-btn">
                            Continue to AI Explorer <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer Navigation -->
    <footer class="adventure-footer">
        <a href="../03-css-artist/index.html" class="footer-btn secondary">
            <i class="fas fa-arrow-left"></i> Previous Adventure
        </a>
        <a href="../05-ai-explorer/index.html" class="footer-btn primary">
            Bonus Adventure <i class="fas fa-arrow-right"></i>
        </a>
    </footer>

    <script>
        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // Magic box demos
        const colors = ['#f72585', '#7209b7', '#4361ee', '#06d6a0', '#ffd166', '#e74c3c'];
        let colorIndex = 0;
        let isSmall = false;
        let isHidden = false;
        
        function changeBoxColor() {
            colorIndex = (colorIndex + 1) % colors.length;
            const box = document.getElementById('magic-box');
            box.style.background = `linear-gradient(135deg, ${colors[colorIndex]}, ${colors[(colorIndex + 1) % colors.length]})`;
        }
        
        function changeBoxSize() {
            const box = document.getElementById('magic-box');
            if (isSmall) {
                box.style.width = '200px';
                box.style.height = '200px';
                box.style.fontSize = '4rem';
            } else {
                box.style.width = '100px';
                box.style.height = '100px';
                box.style.fontSize = '2rem';
            }
            isSmall = !isSmall;
        }
        
        function toggleBox() {
            const box = document.getElementById('magic-box');
            if (isHidden) {
                box.style.opacity = '1';
                box.style.transform = 'scale(1)';
            } else {
                box.style.opacity = '0';
                box.style.transform = 'scale(0)';
            }
            isHidden = !isHidden;
        }
        
        // Click counter
        let count = 0;
        
        function incrementCounter() {
            count++;
            document.getElementById('click-count').textContent = count;
            document.getElementById('click-count').style.transform = 'scale(1.2)';
            setTimeout(() => {
                document.getElementById('click-count').style.transform = 'scale(1)';
            }, 100);
        }
        
        function resetCounter() {
            count = 0;
            document.getElementById('click-count').textContent = count;
        }
        
        // Name greeter
        function greetUser() {
            const name = document.getElementById('name-input').value;
            const output = document.getElementById('greeting-output');
            
            if (name.trim() === '') {
                output.innerHTML = 'üëÜ Please type your name first!';
                output.style.color = '#f72585';
            } else {
                const safeName = escapeHtml(name);
                const greetings = [
                    `Hello, ${safeName}! üëã`,
                    `Nice to meet you, ${safeName}! üéâ`,
                    `Welcome, ${safeName}! ‚≠ê`,
                    `Hey there, ${safeName}! You're awesome! üöÄ`
                ];
                output.innerHTML = greetings[Math.floor(Math.random() * greetings.length)];
                output.style.color = '#06d6a0';
            }
        }
        
        // Enter key support for name input
        document.getElementById('name-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') greetUser();
        });
        
        // Math quiz game
        let score = 0;
        let currentAnswer = 0;
        
        function generateQuestion() {
            const num1 = Math.floor(Math.random() * 10) + 1;
            const num2 = Math.floor(Math.random() * 10) + 1;
            const operators = ['+', '-', '√ó'];
            const operator = operators[Math.floor(Math.random() * operators.length)];
            
            let answer;
            switch(operator) {
                case '+': answer = num1 + num2; break;
                case '-': answer = Math.max(num1, num2) - Math.min(num1, num2); break;
                case '√ó': answer = num1 * num2; break;
            }
            
            const questionNum1 = operator === '-' ? Math.max(num1, num2) : num1;
            const questionNum2 = operator === '-' ? Math.min(num1, num2) : num2;
            
            currentAnswer = answer;
            document.getElementById('quiz-question').textContent = `What is ${questionNum1} ${operator} ${questionNum2}?`;
            
            // Generate options
            const options = [answer];
            while (options.length < 4) {
                const wrongAnswer = answer + Math.floor(Math.random() * 10) - 5;
                if (wrongAnswer !== answer && wrongAnswer >= 0 && !options.includes(wrongAnswer)) {
                    options.push(wrongAnswer);
                }
            }
            
            // Shuffle options
            options.sort(() => Math.random() - 0.5);
            
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            options.forEach(option => {
                const btn = document.createElement('button');
                btn.className = 'quiz-btn';
                btn.textContent = option;
                btn.onclick = () => checkQuizAnswer(btn, option);
                optionsContainer.appendChild(btn);
            });
            
            document.getElementById('quiz-result').textContent = '';
        }
        
        function checkQuizAnswer(btn, selected) {
            const buttons = document.querySelectorAll('.quiz-btn');
            buttons.forEach(b => {
                b.disabled = true;
                if (parseInt(b.textContent) === currentAnswer) {
                    b.classList.add('correct');
                }
            });
            
            if (selected === currentAnswer) {
                score++;
                document.getElementById('quiz-result').innerHTML = 'üéâ Correct! Great job!';
                document.getElementById('quiz-result').style.color = '#06d6a0';
            } else {
                btn.classList.add('wrong');
                document.getElementById('quiz-result').innerHTML = `‚ùå Not quite! The answer was ${currentAnswer}`;
                document.getElementById('quiz-result').style.color = '#ef476f';
            }
            
            document.getElementById('quiz-score').textContent = `Score: ${score}`;
        }
        
        // Initialize quiz on load
        window.onload = function() {
            generateQuestion();
            initEvents();
            initReactionGame();
        };
        
        // ====== NEW: Variable Explorer ======
        function updateVariable() {
            const name = document.getElementById('var-name').value || 'myVar';
            const value = document.getElementById('var-value').value || '0';
            
            document.getElementById('var-code').innerHTML = 
                `<span style="color: #66d9ef;">let</span> ${escapeHtml(name)} = ${escapeHtml(value)};`;
            document.getElementById('var-box').textContent = value;
        }
        
        function setVariable(name, value) {
            document.getElementById('var-name').value = name;
            document.getElementById('var-value').value = value;
            updateVariable();
        }
        
        // ====== NEW: Event Detector ======
        let triggeredEvents = new Set();
        
        function initEvents() {
            // Click event
            document.getElementById('event-click').addEventListener('click', function() {
                triggerEvent('click', this);
            });
            
            // Double click event
            document.getElementById('event-double').addEventListener('dblclick', function() {
                triggerEvent('double', this);
            });
            
            // Hover event
            document.getElementById('event-hover').addEventListener('mouseenter', function() {
                triggerEvent('hover', this);
            });
            
            // Key press event
            document.addEventListener('keydown', function() {
                const box = document.getElementById('event-key');
                triggerEvent('key', box);
            });
        }
        
        function triggerEvent(eventType, element) {
            if (triggeredEvents.has(eventType)) return;
            
            triggeredEvents.add(eventType);
            element.style.background = 'rgba(6, 214, 160, 0.5)';
            element.querySelector('.event-status').innerHTML = '‚úÖ Triggered!';
            
            document.getElementById('events-count').textContent = triggeredEvents.size;
            
            if (triggeredEvents.size === 4) {
                document.getElementById('events-complete').style.display = 'block';
                confetti();
            }
        }
        
        // ====== NEW: Decision Maker ======
        function runDecision() {
            const age = parseInt(document.getElementById('decision-age').value) || 0;
            const result = document.getElementById('decision-result');
            
            if (age >= 13) {
                result.innerHTML = 'üéÆ "You can play teen games!"';
                result.style.background = 'linear-gradient(135deg, #06d6a0, #00b894)';
            } else if (age >= 7) {
                result.innerHTML = 'üß© "You can play kid games!"';
                result.style.background = 'linear-gradient(135deg, #ffd166, #f7a325)';
            } else {
                result.innerHTML = 'üë∂ "You can play toddler games!"';
                result.style.background = 'linear-gradient(135deg, #4361ee, #3a0ca3)';
            }
        }
        
        function setAge(age) {
            document.getElementById('decision-age').value = age;
            runDecision();
        }
        
        // ====== NEW: Reaction Game ======
        let reactionState = 'waiting'; // waiting, ready, go, done
        let reactionStart = 0;
        let reactionTimeout = null;
        let bestTime = Infinity;
        let attempts = 0;
        
        function initReactionGame() {
            const box = document.getElementById('reaction-box');
            box.addEventListener('click', handleReactionClick);
        }
        
        function handleReactionClick() {
            const box = document.getElementById('reaction-box');
            const result = document.getElementById('reaction-result');
            
            if (reactionState === 'waiting') {
                // Start the game
                reactionState = 'ready';
                box.style.background = '#f72585';
                box.textContent = 'Wait for GREEN...';
                result.textContent = '';
                
                // Random delay between 1-4 seconds
                const delay = Math.random() * 3000 + 1000;
                reactionTimeout = setTimeout(() => {
                    reactionState = 'go';
                    reactionStart = Date.now();
                    box.style.background = '#06d6a0';
                    box.textContent = 'CLICK NOW!';
                }, delay);
                
            } else if (reactionState === 'ready') {
                // Clicked too early
                clearTimeout(reactionTimeout);
                reactionState = 'waiting';
                box.style.background = '#ef476f';
                box.textContent = 'Too early! Click to retry';
                result.textContent = '‚ùå Too early! Wait for green!';
                result.style.color = '#ef476f';
                
            } else if (reactionState === 'go') {
                // Success!
                const time = Date.now() - reactionStart;
                attempts++;
                document.getElementById('reaction-attempts').textContent = attempts;
                
                if (time < bestTime) {
                    bestTime = time;
                    document.getElementById('best-time').textContent = time;
                }
                
                reactionState = 'waiting';
                box.style.background = '#4361ee';
                box.textContent = 'Click to play again!';
                
                result.style.color = '#06d6a0';
                if (time < 250) {
                    result.textContent = `‚ö° ${time}ms - LIGHTNING FAST!`;
                    confetti();
                } else if (time < 350) {
                    result.textContent = `üöÄ ${time}ms - Super quick!`;
                } else if (time < 500) {
                    result.textContent = `üëç ${time}ms - Good job!`;
                } else {
                    result.textContent = `üê¢ ${time}ms - Keep practicing!`;
                }
            }
        }
        
        // Confetti
        function confetti() {
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const c = document.createElement('div');
                    c.innerHTML = ['‚ö°', '‚≠ê', 'üéâ', '‚ú®'][Math.floor(Math.random() * 4)];
                    c.style.cssText = `position: fixed; top: -20px; left: ${Math.random() * 100}vw; font-size: ${Math.random() * 20 + 15}px; z-index: 9999; pointer-events: none; animation: confettiFall ${Math.random() * 2 + 2}s linear forwards;`;
                    document.body.appendChild(c);
                    setTimeout(() => c.remove(), 4000);
                }, i * 50);
            }
        }
        
        // Add confetti animation
        const confettiStyle = document.createElement('style');
        confettiStyle.textContent = `@keyframes confettiFall { to { transform: translateY(100vh) rotate(720deg); opacity: 0; } }`;
        document.head.appendChild(confettiStyle);
        
        // Progress tracking with achievements
        document.querySelectorAll('.checkpoint-check').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const completed = document.querySelectorAll('.checkpoint-check:checked').length;
                const total = document.querySelectorAll('.checkpoint-check').length;
                
                if (completed === total) {
                    document.getElementById('celebration').scrollIntoView({ behavior: 'smooth' });
                    confetti();
                    
                    // Unlock achievement when all checkpoints complete
                    if (window.TechExplorers && TechExplorers.storage) {
                        TechExplorers.storage.addAchievement({
                            id: 'adventure-4',
                            name: 'JavaScript Wizard',
                            icon: '‚ö°',
                            description: 'Completed Adventure 4: JavaScript Wizard',
                            adventure: 4,
                            type: 'complete'
                        });
                    }
                }
            });
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèÉ Code Maze Runner - Tech Explorers</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Varela+Round&family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Varela Round', sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }
        
        .container { max-width: 1000px; margin: 0 auto; }
        
        header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        header h1 {
            font-family: 'Comic Neue', cursive;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #00ff87, #60efff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        header p { color: #aaa; }
        
        .nav-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .nav-links a {
            padding: 8px 18px;
            background: rgba(255,255,255,0.1);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .nav-links a:hover { background: rgba(255,255,255,0.2); }
        
        .game-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
        }
        
        @media (max-width: 800px) {
            .game-container {
                grid-template-columns: 1fr;
            }
        }
        
        .maze-section {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 20px;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00ff87;
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: #aaa;
        }
        
        .maze-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        #maze {
            display: grid;
            gap: 2px;
            background: #1a1a3a;
            padding: 10px;
            border-radius: 15px;
            border: 3px solid #00ff87;
        }
        
        .cell {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            border-radius: 5px;
            transition: all 0.2s;
        }
        
        .wall { background: #2a2a4a; }
        .path { background: #3a3a5a; }
        .player { background: #00ff87; font-size: 1.5rem; animation: pulse 1s infinite; }
        .goal { background: #ffd166; animation: glow 1s infinite alternate; }
        .visited { background: rgba(0, 255, 135, 0.2); }
        .coin { background: #3a3a5a; }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 10px #ffd166; }
            to { box-shadow: 0 0 25px #ffd166; }
        }
        
        .controls-section {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 20px;
        }
        
        .controls-section h3 {
            color: #00ff87;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .code-input {
            background: #1a1a3a;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .code-input textarea {
            width: 100%;
            height: 150px;
            background: #0d0d1a;
            border: 2px solid #333;
            border-radius: 10px;
            color: #00ff87;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            padding: 10px;
            resize: none;
        }
        
        .code-input textarea:focus {
            outline: none;
            border-color: #00ff87;
        }
        
        .command-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .cmd-btn {
            padding: 12px;
            background: linear-gradient(135deg, #4361ee, #7209b7);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
        }
        
        .cmd-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .run-btn {
            background: linear-gradient(135deg, #06d6a0, #00c896);
            color: white;
        }
        
        .reset-btn {
            background: linear-gradient(135deg, #f72585, #e91e7a);
            color: white;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .commands-help {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .commands-help h4 {
            color: #ffd166;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .commands-help p {
            font-size: 0.8rem;
            color: #aaa;
            margin-bottom: 5px;
            font-family: 'Fira Code', monospace;
        }
        
        .commands-help code {
            color: #00ff87;
            background: rgba(0,0,0,0.3);
            padding: 2px 6px;
            border-radius: 4px;
        }
        
        .level-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .level-btn {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid transparent;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .level-btn:hover { background: rgba(255,255,255,0.2); }
        .level-btn.active { border-color: #00ff87; background: rgba(0, 255, 135, 0.2); }
        .level-btn.completed { background: rgba(6, 214, 160, 0.3); }
        .level-btn.completed::after { content: ' ‚úì'; }
        
        .message {
            text-align: center;
            padding: 15px;
            border-radius: 12px;
            margin-top: 15px;
            display: none;
        }
        
        .message.success {
            background: rgba(6, 214, 160, 0.2);
            border: 2px solid #06d6a0;
            color: #06d6a0;
            display: block;
        }
        
        .message.error {
            background: rgba(247, 37, 133, 0.2);
            border: 2px solid #f72585;
            color: #f72585;
            display: block;
        }
        
        .execution-log {
            background: #0d0d1a;
            border-radius: 10px;
            padding: 10px;
            margin-top: 15px;
            max-height: 100px;
            overflow-y: auto;
            font-family: 'Fira Code', monospace;
            font-size: 0.75rem;
        }
        
        .log-entry {
            color: #888;
            margin-bottom: 3px;
        }
        
        .log-entry.success { color: #06d6a0; }
        .log-entry.error { color: #f72585; }
        
        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            top: -10px;
            animation: fall 3s linear forwards;
            z-index: 1000;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèÉ Code Maze Runner</h1>
            <p>Write code commands to guide the explorer through the maze!</p>
            <div class="nav-links">
                <a href="../index.html"><i class="fas fa-home"></i> Home</a>
                <a href="../activities/all-activities.html"><i class="fas fa-gamepad"></i> All Activities</a>
                <a href="code-puzzle.html"><i class="fas fa-puzzle-piece"></i> Code Puzzle</a>
            </div>
        </header>
        
        <div class="level-selector">
            <button class="level-btn active" onclick="loadLevel(1)">Level 1</button>
            <button class="level-btn" onclick="loadLevel(2)">Level 2</button>
            <button class="level-btn" onclick="loadLevel(3)">Level 3</button>
            <button class="level-btn" onclick="loadLevel(4)">Level 4</button>
            <button class="level-btn" onclick="loadLevel(5)">Level 5</button>
            <button class="level-btn" onclick="loadLevel(6)">Level 6</button>
            <button class="level-btn" onclick="loadLevel(7)">Level 7</button>
            <button class="level-btn" onclick="loadLevel(8)">Level 8</button>
        </div>
        
        <div class="game-container">
            <div class="maze-section">
                <div class="stats-bar">
                    <div class="stat">
                        <div class="stat-value" id="level-display">1</div>
                        <div class="stat-label">Level</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="moves-display">0</div>
                        <div class="stat-label">Moves</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="coins-display">0</div>
                        <div class="stat-label">Coins üí∞</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="score-display">0</div>
                        <div class="stat-label">Score</div>
                    </div>
                </div>
                
                <div class="maze-container">
                    <div id="maze"></div>
                </div>
                
                <div id="message" class="message"></div>
                
                <div class="execution-log" id="log"></div>
            </div>
            
            <div class="controls-section">
                <h3>üéÆ Your Commands</h3>
                
                <div class="command-buttons">
                    <button class="cmd-btn" onclick="addCommand('up()')">‚¨ÜÔ∏è up()</button>
                    <button class="cmd-btn" onclick="addCommand('down()')">‚¨áÔ∏è down()</button>
                    <button class="cmd-btn" onclick="addCommand('left()')">‚¨ÖÔ∏è left()</button>
                    <button class="cmd-btn" onclick="addCommand('right()')">‚û°Ô∏è right()</button>
                    <button class="cmd-btn" onclick="addCommand('repeat(3, ')"">üîÑ repeat()</button>
                    <button class="cmd-btn" onclick="addCommand('// comment')">üí¨ Comment</button>
                </div>
                
                <div class="code-input">
                    <textarea id="code-editor" placeholder="// Write your commands here!
// Example:
right()
right()
down()
down()"></textarea>
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn run-btn" onclick="runCode()">
                        <i class="fas fa-play"></i> Run Code
                    </button>
                    <button class="action-btn reset-btn" onclick="resetLevel()">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                </div>
                
                <div class="commands-help">
                    <h4>üìñ Command Reference</h4>
                    <p><code>up()</code> - Move up one space</p>
                    <p><code>down()</code> - Move down one space</p>
                    <p><code>left()</code> - Move left one space</p>
                    <p><code>right()</code> - Move right one space</p>
                    <p><code>repeat(n, cmd)</code> - Repeat command n times</p>
                    <p><code>// text</code> - Add a comment (ignored)</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Game state
        let currentLevel = 1;
        let playerPos = { x: 0, y: 0 };
        let goalPos = { x: 0, y: 0 };
        let coins = [];
        let collectedCoins = 0;
        let moves = 0;
        let totalScore = 0;
        let completedLevels = new Set();
        let maze = [];
        
        // Load completed levels from localStorage
        const saved = localStorage.getItem('mazeRunner_completed');
        if (saved) {
            completedLevels = new Set(JSON.parse(saved));
            updateLevelButtons();
        }
        
        const savedScore = localStorage.getItem('mazeRunner_score');
        if (savedScore) {
            totalScore = parseInt(savedScore);
            document.getElementById('score-display').textContent = totalScore;
        }
        
        // Level definitions: 0 = wall, 1 = path, 2 = player start, 3 = goal, 4 = coin
        const levels = [
            // Level 1: Simple straight path
            {
                grid: [
                    [0, 0, 0, 0, 0, 0, 0],
                    [0, 2, 1, 1, 1, 3, 0],
                    [0, 0, 0, 0, 0, 0, 0]
                ],
                hint: "Try: right() four times!"
            },
            // Level 2: L-shaped path
            {
                grid: [
                    [0, 0, 0, 0, 0, 0, 0],
                    [0, 2, 1, 1, 0, 0, 0],
                    [0, 0, 0, 1, 0, 0, 0],
                    [0, 0, 0, 1, 1, 3, 0],
                    [0, 0, 0, 0, 0, 0, 0]
                ],
                hint: "Go right, then down, then right again!"
            },
            // Level 3: Collecting coins
            {
                grid: [
                    [0, 0, 0, 0, 0, 0, 0],
                    [0, 2, 1, 4, 1, 0, 0],
                    [0, 0, 0, 0, 1, 0, 0],
                    [0, 0, 4, 1, 1, 0, 0],
                    [0, 0, 1, 0, 0, 0, 0],
                    [0, 0, 3, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0]
                ],
                hint: "Collect the coins üí∞ for bonus points!"
            },
            // Level 4: Snake path
            {
                grid: [
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 2, 1, 1, 1, 1, 1, 0, 0],
                    [0, 0, 0, 0, 0, 0, 1, 0, 0],
                    [0, 0, 1, 1, 1, 1, 1, 0, 0],
                    [0, 0, 1, 0, 0, 0, 0, 0, 0],
                    [0, 0, 1, 1, 4, 1, 3, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0]
                ],
                hint: "Use repeat() to save typing! Try: repeat(5, right)"
            },
            // Level 5: Spiral
            {
                grid: [
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 2, 1, 1, 1, 1, 1, 1, 0],
                    [0, 0, 0, 0, 0, 0, 0, 1, 0],
                    [0, 4, 1, 1, 1, 1, 0, 1, 0],
                    [0, 1, 0, 0, 0, 1, 0, 1, 0],
                    [0, 1, 0, 3, 1, 1, 0, 1, 0],
                    [0, 1, 0, 0, 0, 0, 0, 1, 0],
                    [0, 1, 1, 1, 1, 1, 1, 1, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0]
                ],
                hint: "Plan your route carefully!"
            },
            // Level 6: Many coins
            {
                grid: [
                    [0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 2, 4, 1, 4, 1, 4, 0, 0],
                    [0, 0, 0, 1, 0, 1, 0, 0, 0],
                    [0, 0, 0, 4, 0, 4, 0, 0, 0],
                    [0, 0, 0, 1, 0, 1, 0, 0, 0],
                    [0, 0, 0, 4, 1, 4, 1, 3, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0]
                ],
                hint: "Try to collect ALL the coins!"
            },
            // Level 7: Complex maze
            {
                grid: [
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 2, 1, 0, 1, 1, 1, 0, 1, 1, 0],
                    [0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0],
                    [0, 1, 1, 1, 1, 0, 4, 1, 1, 0, 0],
                    [0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0],
                    [0, 1, 1, 1, 0, 4, 1, 1, 1, 0, 0],
                    [0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0],
                    [0, 0, 0, 1, 1, 1, 1, 1, 3, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                ],
                hint: "There's more than one path - find the best one!"
            },
            // Level 8: Ultimate challenge
            {
                grid: [
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 2, 1, 1, 0, 1, 4, 1, 0, 1, 1, 1, 0],
                    [0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
                    [0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0],
                    [0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
                    [0, 1, 0, 1, 1, 4, 1, 1, 1, 4, 0, 1, 0],
                    [0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0],
                    [0, 1, 1, 1, 0, 1, 3, 1, 1, 1, 0, 1, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
                    [0, 4, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                ],
                hint: "You've mastered the maze! Can you get ALL coins?"
            }
        ];
        
        function loadLevel(level) {
            currentLevel = level;
            const levelData = levels[level - 1];
            maze = JSON.parse(JSON.stringify(levelData.grid)); // Deep copy
            coins = [];
            collectedCoins = 0;
            moves = 0;
            
            // Find player start, goal, and coins
            for (let y = 0; y < maze.length; y++) {
                for (let x = 0; x < maze[y].length; x++) {
                    if (maze[y][x] === 2) {
                        playerPos = { x, y };
                        maze[y][x] = 1; // Convert to path
                    } else if (maze[y][x] === 3) {
                        goalPos = { x, y };
                    } else if (maze[y][x] === 4) {
                        coins.push({ x, y });
                    }
                }
            }
            
            renderMaze();
            updateStats();
            updateLevelButtons();
            clearLog();
            hideMessage();
            
            document.getElementById('level-display').textContent = level;
        }
        
        function renderMaze() {
            const mazeEl = document.getElementById('maze');
            mazeEl.innerHTML = '';
            mazeEl.style.gridTemplateColumns = `repeat(${maze[0].length}, 35px)`;
            
            for (let y = 0; y < maze.length; y++) {
                for (let x = 0; x < maze[y].length; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${x}-${y}`;
                    
                    if (x === playerPos.x && y === playerPos.y) {
                        cell.classList.add('player');
                        cell.textContent = 'ü§ñ';
                    } else if (x === goalPos.x && y === goalPos.y) {
                        cell.classList.add('goal');
                        cell.textContent = 'üèÜ';
                    } else if (coins.some(c => c.x === x && c.y === y)) {
                        cell.classList.add('coin');
                        cell.textContent = 'üí∞';
                    } else if (maze[y][x] === 0) {
                        cell.classList.add('wall');
                    } else {
                        cell.classList.add('path');
                    }
                    
                    mazeEl.appendChild(cell);
                }
            }
        }
        
        function updateStats() {
            document.getElementById('moves-display').textContent = moves;
            document.getElementById('coins-display').textContent = collectedCoins;
        }
        
        function updateLevelButtons() {
            const buttons = document.querySelectorAll('.level-btn');
            buttons.forEach((btn, i) => {
                btn.classList.remove('active', 'completed');
                if (i + 1 === currentLevel) {
                    btn.classList.add('active');
                }
                if (completedLevels.has(i + 1)) {
                    btn.classList.add('completed');
                }
            });
        }
        
        function addCommand(cmd) {
            const editor = document.getElementById('code-editor');
            editor.value += (editor.value ? '\n' : '') + cmd;
            editor.focus();
        }
        
        function addLog(message, type = 'normal') {
            const log = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = 'log-entry ' + type;
            entry.textContent = '> ' + message;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }
        
        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }
        
        function showMessage(text, type) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.className = 'message ' + type;
        }
        
        function hideMessage() {
            document.getElementById('message').className = 'message';
        }
        
        function movePlayer(dx, dy, direction) {
            const newX = playerPos.x + dx;
            const newY = playerPos.y + dy;
            
            // Check bounds
            if (newY < 0 || newY >= maze.length || newX < 0 || newX >= maze[0].length) {
                addLog(`Can't move ${direction} - out of bounds!`, 'error');
                return false;
            }
            
            // Check wall
            if (maze[newY][newX] === 0) {
                addLog(`Can't move ${direction} - there's a wall!`, 'error');
                return false;
            }
            
            // Move successful
            playerPos.x = newX;
            playerPos.y = newY;
            moves++;
            
            // Check for coin
            const coinIndex = coins.findIndex(c => c.x === newX && c.y === newY);
            if (coinIndex !== -1) {
                coins.splice(coinIndex, 1);
                collectedCoins++;
                addLog(`Collected a coin! üí∞ (${collectedCoins} total)`, 'success');
            } else {
                addLog(`Moved ${direction}`, 'success');
            }
            
            return true;
        }
        
        async function runCode() {
            const code = document.getElementById('code-editor').value;
            const lines = code.split('\n').filter(line => line.trim() && !line.trim().startsWith('//'));
            
            clearLog();
            hideMessage();
            addLog('Starting execution...', 'success');
            
            for (const line of lines) {
                const trimmed = line.trim();
                let success = true;
                
                // Parse repeat command
                const repeatMatch = trimmed.match(/repeat\s*\(\s*(\d+)\s*,\s*(\w+)\s*\)/);
                if (repeatMatch) {
                    const times = parseInt(repeatMatch[1]);
                    const cmd = repeatMatch[2];
                    addLog(`Repeating ${cmd}() ${times} times...`);
                    
                    for (let i = 0; i < times && success; i++) {
                        success = executeCommand(cmd + '()');
                        renderMaze();
                        updateStats();
                        await sleep(200);
                        
                        if (checkWin()) return;
                    }
                } else {
                    success = executeCommand(trimmed);
                    renderMaze();
                    updateStats();
                    await sleep(300);
                    
                    if (checkWin()) return;
                }
                
                if (!success) {
                    showMessage('‚ùå Hit an obstacle! Try again.', 'error');
                    return;
                }
            }
            
            // Didn't reach goal
            if (playerPos.x !== goalPos.x || playerPos.y !== goalPos.y) {
                showMessage("ü§î You haven't reached the goal yet! Add more commands.", 'error');
            }
        }
        
        function executeCommand(cmd) {
            switch(cmd) {
                case 'up()':
                    return movePlayer(0, -1, 'up');
                case 'down()':
                    return movePlayer(0, 1, 'down');
                case 'left()':
                    return movePlayer(-1, 0, 'left');
                case 'right()':
                    return movePlayer(1, 0, 'right');
                default:
                    addLog(`Unknown command: ${cmd}`, 'error');
                    return true; // Don't stop execution for unknown commands
            }
        }
        
        function checkWin() {
            if (playerPos.x === goalPos.x && playerPos.y === goalPos.y) {
                const levelScore = 100 + (collectedCoins * 25) - (moves * 2);
                const bonus = Math.max(0, levelScore);
                totalScore += bonus;
                
                completedLevels.add(currentLevel);
                localStorage.setItem('mazeRunner_completed', JSON.stringify([...completedLevels]));
                localStorage.setItem('mazeRunner_score', totalScore.toString());
                
                document.getElementById('score-display').textContent = totalScore;
                updateLevelButtons();
                
                showMessage(`üéâ Level ${currentLevel} Complete! +${bonus} points!`, 'success');
                addLog(`GOAL REACHED! Score: +${bonus}`, 'success');
                
                createConfetti();
                
                // Auto-advance after delay
                if (currentLevel < levels.length) {
                    setTimeout(() => {
                        if (confirm(`Great job! Ready for Level ${currentLevel + 1}?`)) {
                            loadLevel(currentLevel + 1);
                        }
                    }, 1500);
                } else {
                    setTimeout(() => {
                        alert('üèÜ CONGRATULATIONS! You completed ALL levels! You are a Code Maze Master!');
                    }, 1000);
                }
                
                return true;
            }
            return false;
        }
        
        function resetLevel() {
            loadLevel(currentLevel);
            document.getElementById('code-editor').value = '';
        }
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        function createConfetti() {
            const colors = ['#ff6b6b', '#ffd166', '#06d6a0', '#4361ee', '#f72585', '#00ff87'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 4000);
            }
        }
        
        // Initialize
        loadLevel(1);
    </script>
    <footer style="background: #1a1a2e; color: white; padding: 20px; text-align: center; margin-top: 40px;">
        <p style="margin: 0; opacity: 0.8;">Made with ‚ù§Ô∏è by Tech Explorers | <a href="../index.html" style="color: #06d6a0;">Home</a> | <a href="../activities/all-activities.html" style="color: #06d6a0;">More Activities</a></p>
    </footer>
</body>
</html>

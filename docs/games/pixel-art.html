<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé® Pixel Art Maker - Tech Explorers</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Varela+Round&family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Varela Round', sans-serif;
            background: linear-gradient(135deg, #f72585, #4361ee);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container { max-width: 1000px; margin: 0 auto; }
        
        header {
            text-align: center;
            color: white;
            margin-bottom: 20px;
        }
        
        header h1 {
            font-family: 'Comic Neue', cursive;
            font-size: 2.5rem;
            margin-bottom: 8px;
        }
        
        .nav-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 12px;
        }
        
        .nav-links a {
            padding: 8px 18px;
            background: rgba(255,255,255,0.2);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .nav-links a:hover { background: rgba(255,255,255,0.3); }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 250px;
            gap: 20px;
        }
        
        @media (max-width: 800px) {
            .main-grid { grid-template-columns: 1fr; }
        }
        
        .card {
            background: white;
            border-radius: 25px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.25);
        }
        
        .card h2 {
            color: #f72585;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Canvas */
        .canvas-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .pixel-grid {
            display: grid;
            gap: 1px;
            background: #333;
            padding: 1px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .pixel {
            width: 25px;
            height: 25px;
            background: white;
            cursor: pointer;
            transition: background 0.1s;
        }
        
        .pixel:hover {
            opacity: 0.8;
        }
        
        /* Tools */
        .tool-section {
            margin-bottom: 20px;
        }
        
        .tool-section h3 {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }
        
        .size-picker {
            display: flex;
            gap: 8px;
        }
        
        .size-btn {
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        
        .size-btn:hover { border-color: #f72585; }
        .size-btn.active { border-color: #f72585; background: #fff0f5; }
        
        .tool-picker {
            display: flex;
            gap: 8px;
        }
        
        .tool-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s;
        }
        
        .tool-btn:hover { border-color: #f72585; }
        .tool-btn.active { border-color: #f72585; background: #fff0f5; }
        
        .color-palette {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 6px;
        }
        
        .color-swatch {
            aspect-ratio: 1;
            border: 3px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .color-swatch:hover { transform: scale(1.1); }
        .color-swatch.active { border-color: #333; }
        
        .current-color {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .current-color-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid #333;
        }
        
        .current-color input[type="color"] {
            width: 100%;
            height: 35px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        
        /* Templates */
        .template-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }
        
        .template-btn {
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            font-size: 1.3rem;
            transition: all 0.2s;
        }
        
        .template-btn:hover { border-color: #f72585; transform: scale(1.05); }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px;
            border: none;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:hover { transform: scale(1.02); }
        
        .btn-clear {
            background: #e9ecef;
            color: #666;
        }
        
        .btn-save {
            background: linear-gradient(135deg, #06d6a0, #4ade80);
            color: white;
        }
        
        .btn-load {
            background: linear-gradient(135deg, #4361ee, #7209b7);
            color: white;
        }
        
        /* Saved Works */
        .saved-section {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px dashed #e9ecef;
        }
        
        .saved-section h3 {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }
        
        .saved-works {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .saved-work {
            width: 50px;
            height: 50px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            background-size: cover;
            background-position: center;
        }
        
        .saved-work:hover { border-color: #f72585; transform: scale(1.1); }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #333;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
        }
        
        .toast.show { transform: translateY(0); opacity: 1; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé® Pixel Art Maker</h1>
            <p>Create retro-style pixel art!</p>
            <div class="nav-links">
                <a href="../index.html"><i class="fas fa-home"></i> Home</a>
                <a href="../activities/all-activities.html"><i class="fas fa-th"></i> Activities</a>
            </div>
        </header>
        
        <div class="main-grid">
            <!-- Canvas Area -->
            <div class="card">
                <h2><i class="fas fa-image"></i> Your Canvas</h2>
                
                <div class="canvas-container">
                    <div class="pixel-grid" id="pixel-grid">
                        <!-- Pixels will be generated here -->
                    </div>
                </div>
            </div>
            
            <!-- Tools Panel -->
            <div class="card">
                <h2><i class="fas fa-palette"></i> Tools</h2>
                
                <div class="tool-section">
                    <h3>üìê Canvas Size</h3>
                    <div class="size-picker">
                        <button class="size-btn" data-size="8">8√ó8</button>
                        <button class="size-btn active" data-size="12">12√ó12</button>
                        <button class="size-btn" data-size="16">16√ó16</button>
                    </div>
                </div>
                
                <div class="tool-section">
                    <h3>üîß Tool</h3>
                    <div class="tool-picker">
                        <button class="tool-btn active" data-tool="paint" title="Paint">üñåÔ∏è</button>
                        <button class="tool-btn" data-tool="fill" title="Fill">ü™£</button>
                        <button class="tool-btn" data-tool="erase" title="Erase">üßΩ</button>
                    </div>
                </div>
                
                <div class="tool-section">
                    <h3>üåà Colors</h3>
                    <div class="color-palette" id="color-palette">
                        <!-- Colors will be generated -->
                    </div>
                    <div class="current-color">
                        <div class="current-color-preview" id="current-preview"></div>
                        <input type="color" id="custom-color" value="#f72585">
                    </div>
                </div>
                
                <div class="tool-section">
                    <h3>‚ú® Templates</h3>
                    <div class="template-grid">
                        <button class="template-btn" onclick="loadTemplate('heart')">‚ù§Ô∏è</button>
                        <button class="template-btn" onclick="loadTemplate('star')">‚≠ê</button>
                        <button class="template-btn" onclick="loadTemplate('smiley')">üòä</button>
                        <button class="template-btn" onclick="loadTemplate('tree')">üå≤</button>
                        <button class="template-btn" onclick="loadTemplate('ghost')">üëª</button>
                        <button class="template-btn" onclick="loadTemplate('mushroom')">üçÑ</button>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-clear" onclick="clearCanvas()">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                    <button class="btn btn-save" onclick="saveArt()">
                        <i class="fas fa-save"></i> Save Art
                    </button>
                </div>
                
                <div class="saved-section">
                    <h3>üíæ Saved Art</h3>
                    <div class="saved-works" id="saved-works">
                        <p style="color: #999; font-size: 0.85rem;">No saved art yet!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="toast" id="toast"></div>
    
    <script>
        let canvasSize = 12;
        let currentColor = '#f72585';
        let currentTool = 'paint';
        let isDrawing = false;
        let pixels = [];
        
        const colors = [
            '#000000', '#ffffff', '#f72585', '#b5179e', '#7209b7', '#4361ee',
            '#4cc9f0', '#06d6a0', '#4ade80', '#ffd166', '#f59e0b', '#ef4444'
        ];
        
        // Initialize color palette
        function initColorPalette() {
            const palette = document.getElementById('color-palette');
            palette.innerHTML = colors.map((color, i) => `
                <button class="color-swatch ${i === 2 ? 'active' : ''}" 
                        style="background: ${color};"
                        data-color="${color}"></button>
            `).join('');
            
            document.querySelectorAll('.color-swatch').forEach(swatch => {
                swatch.addEventListener('click', () => {
                    document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
                    swatch.classList.add('active');
                    currentColor = swatch.dataset.color;
                    updateCurrentColor();
                });
            });
            
            updateCurrentColor();
        }
        
        function updateCurrentColor() {
            document.getElementById('current-preview').style.background = currentColor;
            document.getElementById('custom-color').value = currentColor;
        }
        
        // Custom color picker
        document.getElementById('custom-color').addEventListener('input', (e) => {
            currentColor = e.target.value;
            document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
            updateCurrentColor();
        });
        
        // Size buttons
        document.querySelectorAll('.size-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                canvasSize = parseInt(btn.dataset.size);
                initCanvas();
            });
        });
        
        // Tool buttons
        document.querySelectorAll('.tool-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentTool = btn.dataset.tool;
            });
        });
        
        function initCanvas() {
            const grid = document.getElementById('pixel-grid');
            grid.style.gridTemplateColumns = `repeat(${canvasSize}, 1fr)`;
            
            pixels = new Array(canvasSize * canvasSize).fill('#ffffff');
            
            const pixelSize = Math.min(Math.floor(500 / canvasSize), 40);
            
            grid.innerHTML = '';
            for (let i = 0; i < canvasSize * canvasSize; i++) {
                const pixel = document.createElement('div');
                pixel.className = 'pixel';
                pixel.style.width = pixelSize + 'px';
                pixel.style.height = pixelSize + 'px';
                pixel.dataset.index = i;
                
                pixel.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    isDrawing = true;
                    handlePixel(i);
                });
                
                pixel.addEventListener('mouseenter', () => {
                    if (isDrawing) handlePixel(i);
                });
                
                pixel.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    handlePixel(i);
                });
                
                grid.appendChild(pixel);
            }
        }
        
        document.addEventListener('mouseup', () => isDrawing = false);
        
        function handlePixel(index) {
            if (currentTool === 'paint') {
                paintPixel(index, currentColor);
            } else if (currentTool === 'erase') {
                paintPixel(index, '#ffffff');
            } else if (currentTool === 'fill') {
                floodFill(index, pixels[index], currentColor);
            }
        }
        
        function paintPixel(index, color) {
            pixels[index] = color;
            const pixelElements = document.querySelectorAll('.pixel');
            pixelElements[index].style.background = color;
        }
        
        function floodFill(index, targetColor, fillColor) {
            if (targetColor === fillColor) return;
            
            const stack = [index];
            const visited = new Set();
            
            while (stack.length > 0) {
                const current = stack.pop();
                
                if (visited.has(current)) continue;
                if (current < 0 || current >= pixels.length) continue;
                if (pixels[current] !== targetColor) continue;
                
                visited.add(current);
                paintPixel(current, fillColor);
                
                const row = Math.floor(current / canvasSize);
                const col = current % canvasSize;
                
                if (col > 0) stack.push(current - 1);
                if (col < canvasSize - 1) stack.push(current + 1);
                if (row > 0) stack.push(current - canvasSize);
                if (row < canvasSize - 1) stack.push(current + canvasSize);
            }
        }
        
        function clearCanvas() {
            if (confirm('Clear your pixel art?')) {
                initCanvas();
                showToast('üßπ Canvas cleared!');
            }
        }
        
        // Templates (12x12 grid patterns)
        const templates = {
            heart: {
                size: 12,
                pattern: [
                    0,0,1,1,0,0,0,1,1,0,0,0,
                    0,1,1,1,1,0,1,1,1,1,0,0,
                    1,1,1,1,1,1,1,1,1,1,1,0,
                    1,1,1,1,1,1,1,1,1,1,1,0,
                    1,1,1,1,1,1,1,1,1,1,1,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,0,1,1,1,1,1,1,1,0,0,0,
                    0,0,0,1,1,1,1,1,0,0,0,0,
                    0,0,0,0,1,1,1,0,0,0,0,0,
                    0,0,0,0,0,1,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0
                ],
                color: '#f72585'
            },
            star: {
                size: 12,
                pattern: [
                    0,0,0,0,0,1,0,0,0,0,0,0,
                    0,0,0,0,0,1,0,0,0,0,0,0,
                    0,0,0,0,1,1,1,0,0,0,0,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,0,1,1,1,1,1,1,1,0,0,0,
                    0,0,0,1,1,1,1,1,0,0,0,0,
                    0,0,1,1,1,1,1,1,1,0,0,0,
                    0,0,1,1,0,0,0,1,1,0,0,0,
                    0,1,1,0,0,0,0,0,1,1,0,0,
                    1,1,0,0,0,0,0,0,0,1,1,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0
                ],
                color: '#ffd166'
            },
            smiley: {
                size: 12,
                pattern: [
                    0,0,0,1,1,1,1,1,0,0,0,0,
                    0,0,1,1,1,1,1,1,1,0,0,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,1,1,2,1,1,1,2,1,1,0,0,
                    0,1,1,2,1,1,1,2,1,1,0,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,1,2,1,1,1,1,1,2,1,0,0,
                    0,1,1,2,2,2,2,2,1,1,0,0,
                    0,0,1,1,1,1,1,1,1,0,0,0,
                    0,0,0,1,1,1,1,1,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0
                ],
                colors: { 1: '#ffd166', 2: '#1e1e2e' }
            },
            tree: {
                size: 12,
                pattern: [
                    0,0,0,0,0,1,0,0,0,0,0,0,
                    0,0,0,0,1,1,1,0,0,0,0,0,
                    0,0,0,1,1,1,1,1,0,0,0,0,
                    0,0,0,0,1,1,1,0,0,0,0,0,
                    0,0,0,1,1,1,1,1,0,0,0,0,
                    0,0,1,1,1,1,1,1,1,0,0,0,
                    0,0,0,1,1,1,1,1,0,0,0,0,
                    0,0,1,1,1,1,1,1,1,0,0,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,0,0,0,2,2,2,0,0,0,0,0,
                    0,0,0,0,2,2,2,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0
                ],
                colors: { 1: '#06d6a0', 2: '#8b5a3c' }
            },
            ghost: {
                size: 12,
                pattern: [
                    0,0,0,1,1,1,1,1,0,0,0,0,
                    0,0,1,1,1,1,1,1,1,0,0,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,1,1,2,2,1,2,2,1,1,0,0,
                    0,1,1,2,2,1,2,2,1,1,0,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,1,0,1,1,0,1,1,0,1,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0
                ],
                colors: { 1: '#ffffff', 2: '#1e1e2e' }
            },
            mushroom: {
                size: 12,
                pattern: [
                    0,0,0,1,1,1,1,1,0,0,0,0,
                    0,0,1,1,2,1,1,2,1,0,0,0,
                    0,1,1,2,2,1,1,2,2,1,0,0,
                    0,1,1,2,2,1,1,2,2,1,0,0,
                    0,1,1,1,1,1,1,1,1,1,0,0,
                    0,0,1,1,1,1,1,1,1,0,0,0,
                    0,0,0,3,3,3,3,3,0,0,0,0,
                    0,0,0,0,3,3,3,0,0,0,0,0,
                    0,0,0,0,3,3,3,0,0,0,0,0,
                    0,0,0,0,3,3,3,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0,
                    0,0,0,0,0,0,0,0,0,0,0,0
                ],
                colors: { 1: '#f72585', 2: '#ffffff', 3: '#ffeaa7' }
            }
        };
        
        function loadTemplate(name) {
            const template = templates[name];
            if (!template) return;
            
            // Set canvas size to 12
            canvasSize = template.size || 12;
            document.querySelectorAll('.size-btn').forEach(b => {
                b.classList.toggle('active', parseInt(b.dataset.size) === canvasSize);
            });
            
            initCanvas();
            
            template.pattern.forEach((value, index) => {
                if (value > 0) {
                    let color;
                    if (template.colors) {
                        color = template.colors[value] || template.color || currentColor;
                    } else {
                        color = template.color || currentColor;
                    }
                    paintPixel(index, color);
                }
            });
            
            showToast('‚ú® Template loaded!');
        }
        
        function saveArt() {
            const artData = {
                id: Date.now(),
                size: canvasSize,
                pixels: [...pixels]
            };
            
            let savedArt = JSON.parse(localStorage.getItem('pixelArt_saved') || '[]');
            savedArt.unshift(artData);
            if (savedArt.length > 6) savedArt = savedArt.slice(0, 6);
            localStorage.setItem('pixelArt_saved', JSON.stringify(savedArt));
            
            renderSavedArt();
            showToast('üíæ Pixel art saved!');
        }
        
        function renderSavedArt() {
            const savedArt = JSON.parse(localStorage.getItem('pixelArt_saved') || '[]');
            const container = document.getElementById('saved-works');
            
            if (savedArt.length === 0) {
                container.innerHTML = '<p style="color: #999; font-size: 0.85rem;">No saved art yet!</p>';
                return;
            }
            
            container.innerHTML = savedArt.map((art, index) => {
                // Create a mini preview
                const canvas = document.createElement('canvas');
                canvas.width = art.size;
                canvas.height = art.size;
                const ctx = canvas.getContext('2d');
                
                art.pixels.forEach((color, i) => {
                    const x = i % art.size;
                    const y = Math.floor(i / art.size);
                    ctx.fillStyle = color;
                    ctx.fillRect(x, y, 1, 1);
                });
                
                return `<div class="saved-work" 
                            style="background-image: url(${canvas.toDataURL()}); image-rendering: pixelated;"
                            onclick="loadArt(${index})"></div>`;
            }).join('');
        }
        
        function loadArt(index) {
            const savedArt = JSON.parse(localStorage.getItem('pixelArt_saved') || '[]');
            const art = savedArt[index];
            
            if (!art) return;
            
            canvasSize = art.size;
            document.querySelectorAll('.size-btn').forEach(b => {
                b.classList.toggle('active', parseInt(b.dataset.size) === canvasSize);
            });
            
            initCanvas();
            
            art.pixels.forEach((color, index) => {
                paintPixel(index, color);
            });
            
            showToast('‚úÖ Art loaded!');
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }
        
        // Initialize
        initColorPalette();
        initCanvas();
        renderSavedArt();
    </script>
</body>
</html>

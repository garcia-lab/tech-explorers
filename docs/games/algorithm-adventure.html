<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßÆ Algorithm Adventure - Tech Explorers</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Varela+Round&family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Varela Round', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }
        
        .container { max-width: 1000px; margin: 0 auto; }
        
        header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        header h1 {
            font-family: 'Comic Neue', cursive;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        header p { color: #aaa; }
        
        .nav-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .nav-links a {
            padding: 8px 18px;
            background: rgba(255,255,255,0.1);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .nav-links a:hover { background: rgba(255,255,255,0.2); }
        
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 12px 25px;
            background: rgba(255,255,255,0.1);
            border: 2px solid transparent;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .tab-btn:hover { background: rgba(255,255,255,0.2); }
        .tab-btn.active { background: linear-gradient(135deg, #f72585, #7209b7); }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .game-card {
            background: rgba(255,255,255,0.1);
            border-radius: 25px;
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        
        .game-card h2 {
            color: #ffd166;
            margin-bottom: 20px;
            text-align: center;
        }
        
        /* Sorting Visualization */
        .sort-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 5px;
            height: 250px;
            margin: 30px 0;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
        }
        
        .bar {
            width: 40px;
            background: linear-gradient(180deg, #4361ee, #7209b7);
            border-radius: 5px 5px 0 0;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 5px;
            color: white;
            font-weight: bold;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        
        .bar.comparing {
            background: linear-gradient(180deg, #f72585, #ff6b9d);
            transform: scaleY(1.05);
        }
        
        .bar.sorted {
            background: linear-gradient(180deg, #06d6a0, #00c896);
        }
        
        .bar.swapping {
            background: linear-gradient(180deg, #ffd166, #ffb347);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .control-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .control-btn.primary {
            background: linear-gradient(135deg, #06d6a0, #00c896);
            color: white;
        }
        
        .control-btn.secondary {
            background: rgba(255,255,255,0.2);
            color: white;
        }
        
        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .speed-control {
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: center;
            margin: 15px 0;
        }
        
        .speed-control label { color: #aaa; }
        
        .speed-slider {
            width: 150px;
            accent-color: #f72585;
        }
        
        /* Algorithm explanation */
        .explanation-box {
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .explanation-box h3 {
            color: #60efff;
            margin-bottom: 15px;
        }
        
        .explanation-box p {
            color: #ccc;
            line-height: 1.8;
            margin-bottom: 10px;
        }
        
        .step-display {
            text-align: center;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .step-display .step-num {
            font-size: 2rem;
            font-weight: bold;
            color: #ffd166;
        }
        
        .step-display .step-text {
            color: #aaa;
        }
        
        /* Searching Game */
        .search-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
            margin: 30px 0;
        }
        
        .search-cell {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #4361ee, #7209b7);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .search-cell:hover {
            transform: scale(1.1);
        }
        
        .search-cell.revealed {
            background: linear-gradient(135deg, #06d6a0, #00c896);
        }
        
        .search-cell.target {
            background: linear-gradient(135deg, #ffd166, #ffb347);
            color: #333;
            animation: pulse 0.5s;
        }
        
        .search-cell.checked {
            background: rgba(255,255,255,0.1);
            color: #888;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .search-target {
            text-align: center;
            font-size: 1.5rem;
            margin: 20px 0;
        }
        
        .search-target span {
            color: #ffd166;
            font-weight: bold;
            font-size: 2rem;
        }
        
        /* Pattern Game */
        .pattern-display {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .pattern-item {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #4361ee, #7209b7);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .pattern-item.mystery {
            background: linear-gradient(135deg, #f72585, #ff6b9d);
            font-size: 2rem;
        }
        
        .pattern-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .pattern-option {
            width: 70px;
            height: 70px;
            background: rgba(255,255,255,0.1);
            border: 3px solid transparent;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pattern-option:hover {
            border-color: #60efff;
            transform: scale(1.1);
        }
        
        .pattern-option.correct {
            background: #06d6a0;
            border-color: #06d6a0;
        }
        
        .pattern-option.wrong {
            background: #f72585;
            border-color: #f72585;
        }
        
        /* Stats */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 25px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ffd166;
        }
        
        .stat-label {
            color: #888;
            font-size: 0.9rem;
        }
        
        /* Pathfinding */
        .path-grid {
            display: grid;
            gap: 3px;
            max-width: 500px;
            margin: 20px auto;
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 15px;
        }
        
        .path-cell {
            aspect-ratio: 1;
            background: #2a2a4a;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .path-cell.wall { background: #1a1a2a; }
        .path-cell.start { background: #06d6a0; }
        .path-cell.end { background: #f72585; }
        .path-cell.visited { background: rgba(67, 97, 238, 0.5); }
        .path-cell.path { background: #ffd166; }
        .path-cell.current { background: #60efff; animation: pulse 0.3s infinite; }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: #aaa;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üßÆ Algorithm Adventure</h1>
            <p>Learn how computers solve problems step by step!</p>
            <div class="nav-links">
                <a href="../index.html"><i class="fas fa-home"></i> Home</a>
                <a href="../activities/all-activities.html"><i class="fas fa-gamepad"></i> All Activities</a>
                <a href="binary-lab.html"><i class="fas fa-calculator"></i> Binary Lab</a>
            </div>
        </header>
        
        <div class="stats-bar">
            <div class="stat">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Score</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="level">1</div>
                <div class="stat-label">Level</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="algorithms-learned">0</div>
                <div class="stat-label">Algorithms Learned</div>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('sorting')">üìä Sorting</button>
            <button class="tab-btn" onclick="showTab('searching')">üîç Searching</button>
            <button class="tab-btn" onclick="showTab('patterns')">üî¢ Patterns</button>
            <button class="tab-btn" onclick="showTab('pathfinding')">üó∫Ô∏è Pathfinding</button>
        </div>
        
        <!-- Sorting Tab -->
        <div id="sorting" class="tab-content active">
            <div class="game-card">
                <h2>üìä Bubble Sort Visualizer</h2>
                
                <div class="sort-container" id="sort-container">
                    <!-- Bars generated by JS -->
                </div>
                
                <div class="step-display">
                    <div class="step-num" id="sort-step">0</div>
                    <div class="step-text" id="sort-status">Click "Start Sorting" to begin!</div>
                </div>
                
                <div class="speed-control">
                    <label>Speed:</label>
                    <input type="range" class="speed-slider" id="speed-slider" min="1" max="10" value="5">
                    <span id="speed-display">Medium</span>
                </div>
                
                <div class="controls">
                    <button class="control-btn primary" id="sort-btn" onclick="startBubbleSort()">
                        <i class="fas fa-play"></i> Start Sorting
                    </button>
                    <button class="control-btn secondary" onclick="shuffleArray()">
                        <i class="fas fa-random"></i> Shuffle
                    </button>
                    <button class="control-btn secondary" onclick="resetSort()">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                </div>
                
                <div class="explanation-box">
                    <h3>üìö How Bubble Sort Works</h3>
                    <p>Bubble Sort compares pairs of adjacent numbers and swaps them if they're in the wrong order.</p>
                    <p>It's called "Bubble" Sort because larger numbers "bubble up" to the end, like bubbles rising in water! ü´ß</p>
                    <p><strong>Steps:</strong></p>
                    <p>1. Compare first two numbers</p>
                    <p>2. Swap if the left one is bigger</p>
                    <p>3. Move to the next pair</p>
                    <p>4. Repeat until everything is sorted!</p>
                </div>
            </div>
        </div>
        
        <!-- Searching Tab -->
        <div id="searching" class="tab-content">
            <div class="game-card">
                <h2>üîç Number Hunt</h2>
                
                <div class="search-target">
                    Find the number: <span id="target-number">?</span>
                </div>
                
                <div class="search-grid" id="search-grid">
                    <!-- Cells generated by JS -->
                </div>
                
                <div class="step-display">
                    <div class="step-num" id="search-attempts">0</div>
                    <div class="step-text">Clicks used (fewer is better!)</div>
                </div>
                
                <div class="controls">
                    <button class="control-btn primary" onclick="newSearchGame()">
                        <i class="fas fa-redo"></i> New Game
                    </button>
                    <button class="control-btn secondary" onclick="showSearchHint()">
                        <i class="fas fa-lightbulb"></i> Hint
                    </button>
                </div>
                
                <div class="explanation-box">
                    <h3>üìö Searching Strategies</h3>
                    <p><strong>Linear Search:</strong> Check each number one by one. Simple but slow!</p>
                    <p><strong>Binary Search:</strong> If numbers are sorted, always check the middle! This eliminates half the numbers each time.</p>
                    <p>üí° <strong>Challenge:</strong> Can you find the number in less than 7 clicks using binary search?</p>
                </div>
            </div>
        </div>
        
        <!-- Patterns Tab -->
        <div id="patterns" class="tab-content">
            <div class="game-card">
                <h2>üî¢ Pattern Recognition</h2>
                
                <p style="text-align: center; color: #aaa; margin-bottom: 20px;">
                    Find the pattern and guess the next number!
                </p>
                
                <div class="pattern-display" id="pattern-display">
                    <!-- Pattern items generated by JS -->
                </div>
                
                <div class="pattern-options" id="pattern-options">
                    <!-- Options generated by JS -->
                </div>
                
                <div class="step-display">
                    <div class="step-num" id="pattern-score">0</div>
                    <div class="step-text">Patterns Solved</div>
                </div>
                
                <div class="controls">
                    <button class="control-btn primary" onclick="newPattern()" id="next-pattern-btn">
                        <i class="fas fa-arrow-right"></i> Next Pattern
                    </button>
                </div>
                
                <div class="explanation-box">
                    <h3>üìö Pattern Types</h3>
                    <p><strong>Arithmetic:</strong> Add or subtract the same number each time (2, 4, 6, 8...)</p>
                    <p><strong>Geometric:</strong> Multiply by the same number each time (2, 4, 8, 16...)</p>
                    <p><strong>Fibonacci:</strong> Add the two previous numbers (1, 1, 2, 3, 5, 8...)</p>
                    <p>Computers use pattern recognition for everything from image processing to predictions!</p>
                </div>
            </div>
        </div>
        
        <!-- Pathfinding Tab -->
        <div id="pathfinding" class="tab-content">
            <div class="game-card">
                <h2>üó∫Ô∏è Pathfinding Maze</h2>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #06d6a0;"></div>
                        <span>Start</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f72585;"></div>
                        <span>End</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #1a1a2a;"></div>
                        <span>Wall</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: rgba(67, 97, 238, 0.5);"></div>
                        <span>Visited</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ffd166;"></div>
                        <span>Path</span>
                    </div>
                </div>
                
                <div class="path-grid" id="path-grid" style="grid-template-columns: repeat(12, 1fr);">
                    <!-- Grid generated by JS -->
                </div>
                
                <div class="step-display">
                    <div class="step-num" id="path-steps">0</div>
                    <div class="step-text" id="path-status">Click "Find Path" to start!</div>
                </div>
                
                <div class="controls">
                    <button class="control-btn primary" id="path-btn" onclick="findPath()">
                        <i class="fas fa-route"></i> Find Path
                    </button>
                    <button class="control-btn secondary" onclick="newMaze()">
                        <i class="fas fa-random"></i> New Maze
                    </button>
                    <button class="control-btn secondary" onclick="clearPath()">
                        <i class="fas fa-eraser"></i> Clear Path
                    </button>
                </div>
                
                <div class="explanation-box">
                    <h3>üìö How Pathfinding Works</h3>
                    <p>This uses the <strong>Breadth-First Search (BFS)</strong> algorithm.</p>
                    <p>It explores all neighbors at the current distance before moving further away - like ripples in water!</p>
                    <p>GPS apps and video game characters use similar algorithms to find their way.</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let score = 0;
        let level = 1;
        let algorithmsLearned = new Set();
        
        // Tab switching
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
        
        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = level;
            document.getElementById('algorithms-learned').textContent = algorithmsLearned.size;
        }
        
        // ============ SORTING ============
        let sortArray = [];
        let sorting = false;
        
        function initSort() {
            sortArray = [8, 4, 2, 9, 1, 5, 7, 3, 6];
            renderBars();
        }
        
        function renderBars() {
            const container = document.getElementById('sort-container');
            container.innerHTML = '';
            
            sortArray.forEach((val, i) => {
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = `${val * 22}px`;
                bar.textContent = val;
                bar.id = `bar-${i}`;
                container.appendChild(bar);
            });
        }
        
        function shuffleArray() {
            if (sorting) return;
            for (let i = sortArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [sortArray[i], sortArray[j]] = [sortArray[j], sortArray[i]];
            }
            document.querySelectorAll('.bar').forEach(b => b.classList.remove('sorted'));
            renderBars();
            document.getElementById('sort-step').textContent = '0';
            document.getElementById('sort-status').textContent = 'Ready to sort!';
        }
        
        function resetSort() {
            sorting = false;
            initSort();
            document.getElementById('sort-step').textContent = '0';
            document.getElementById('sort-status').textContent = 'Click "Start Sorting" to begin!';
            document.getElementById('sort-btn').disabled = false;
        }
        
        async function startBubbleSort() {
            if (sorting) return;
            sorting = true;
            document.getElementById('sort-btn').disabled = true;
            
            let steps = 0;
            const n = sortArray.length;
            const speedSlider = document.getElementById('speed-slider');
            
            for (let i = 0; i < n - 1; i++) {
                for (let j = 0; j < n - i - 1; j++) {
                    if (!sorting) return;
                    
                    const speed = 1100 - speedSlider.value * 100;
                    
                    // Highlight comparing
                    document.getElementById(`bar-${j}`).classList.add('comparing');
                    document.getElementById(`bar-${j+1}`).classList.add('comparing');
                    document.getElementById('sort-status').textContent = `Comparing ${sortArray[j]} and ${sortArray[j+1]}`;
                    
                    await sleep(speed / 2);
                    
                    if (sortArray[j] > sortArray[j + 1]) {
                        // Swap
                        document.getElementById(`bar-${j}`).classList.add('swapping');
                        document.getElementById(`bar-${j+1}`).classList.add('swapping');
                        document.getElementById('sort-status').textContent = `Swapping ${sortArray[j]} and ${sortArray[j+1]}!`;
                        
                        [sortArray[j], sortArray[j + 1]] = [sortArray[j + 1], sortArray[j]];
                        renderBars();
                        
                        await sleep(speed / 2);
                    }
                    
                    document.querySelectorAll('.bar').forEach(b => {
                        b.classList.remove('comparing', 'swapping');
                    });
                    
                    steps++;
                    document.getElementById('sort-step').textContent = steps;
                }
                
                // Mark as sorted
                document.getElementById(`bar-${n - i - 1}`).classList.add('sorted');
            }
            
            document.getElementById(`bar-0`).classList.add('sorted');
            document.getElementById('sort-status').textContent = '‚úÖ Sorted! Great job!';
            
            algorithmsLearned.add('bubble-sort');
            score += 50;
            updateStats();
            
            sorting = false;
            document.getElementById('sort-btn').disabled = false;
        }
        
        // ============ SEARCHING ============
        let searchNumbers = [];
        let targetNumber = 0;
        let searchAttempts = 0;
        
        function initSearch() {
            newSearchGame();
        }
        
        function newSearchGame() {
            searchNumbers = [];
            for (let i = 1; i <= 50; i++) {
                searchNumbers.push(i);
            }
            // Shuffle for display but keep track of positions
            
            targetNumber = Math.floor(Math.random() * 50) + 1;
            searchAttempts = 0;
            
            document.getElementById('target-number').textContent = targetNumber;
            document.getElementById('search-attempts').textContent = 0;
            
            const grid = document.getElementById('search-grid');
            grid.innerHTML = '';
            
            for (let i = 1; i <= 50; i++) {
                const cell = document.createElement('div');
                cell.className = 'search-cell';
                cell.textContent = '?';
                cell.dataset.value = i;
                cell.onclick = () => revealCell(cell, i);
                grid.appendChild(cell);
            }
        }
        
        function revealCell(cell, value) {
            if (cell.classList.contains('revealed') || cell.classList.contains('checked')) return;
            
            searchAttempts++;
            document.getElementById('search-attempts').textContent = searchAttempts;
            
            cell.textContent = value;
            
            if (value === targetNumber) {
                cell.classList.add('target');
                
                let bonus = Math.max(0, 100 - searchAttempts * 10);
                score += 25 + bonus;
                algorithmsLearned.add('searching');
                updateStats();
                
                setTimeout(() => {
                    alert(`üéâ Found it in ${searchAttempts} clicks! ${bonus > 0 ? `+${bonus} bonus!` : ''}`);
                }, 300);
            } else {
                cell.classList.add('checked');
            }
        }
        
        function showSearchHint() {
            alert(`üí° Hint: The numbers are in order (1-50). Try binary search!\n\nStart in the middle (25), then based on whether your target is higher or lower, go to the middle of the remaining half.`);
        }
        
        // ============ PATTERNS ============
        let currentPattern = [];
        let patternAnswer = 0;
        let patternScore = 0;
        
        const patternGenerators = [
            // Arithmetic (add constant)
            () => {
                const start = Math.floor(Math.random() * 10) + 1;
                const diff = Math.floor(Math.random() * 5) + 2;
                const pattern = [];
                for (let i = 0; i < 5; i++) pattern.push(start + diff * i);
                return { pattern, answer: start + diff * 5, type: 'arithmetic' };
            },
            // Geometric (multiply)
            () => {
                const start = Math.floor(Math.random() * 3) + 1;
                const mult = Math.floor(Math.random() * 2) + 2;
                const pattern = [];
                let val = start;
                for (let i = 0; i < 5; i++) {
                    pattern.push(val);
                    val *= mult;
                }
                return { pattern, answer: val, type: 'geometric' };
            },
            // Squares
            () => {
                const offset = Math.floor(Math.random() * 3);
                const pattern = [];
                for (let i = 1; i <= 5; i++) pattern.push((i + offset) * (i + offset));
                return { pattern, answer: (6 + offset) * (6 + offset), type: 'squares' };
            },
            // Add increasing
            () => {
                const start = Math.floor(Math.random() * 5) + 1;
                const pattern = [start];
                let add = 1;
                for (let i = 1; i < 5; i++) {
                    pattern.push(pattern[i-1] + add);
                    add++;
                }
                return { pattern, answer: pattern[4] + add, type: 'increasing' };
            }
        ];
        
        function newPattern() {
            const gen = patternGenerators[Math.floor(Math.random() * patternGenerators.length)];
            const { pattern, answer, type } = gen();
            
            currentPattern = pattern;
            patternAnswer = answer;
            
            const display = document.getElementById('pattern-display');
            display.innerHTML = '';
            
            pattern.forEach(num => {
                const item = document.createElement('div');
                item.className = 'pattern-item';
                item.textContent = num;
                display.appendChild(item);
            });
            
            // Add mystery box
            const mystery = document.createElement('div');
            mystery.className = 'pattern-item mystery';
            mystery.textContent = '?';
            display.appendChild(mystery);
            
            // Generate options
            const options = [answer];
            while (options.length < 4) {
                const fake = answer + Math.floor(Math.random() * 20) - 10;
                if (fake > 0 && !options.includes(fake)) {
                    options.push(fake);
                }
            }
            options.sort(() => Math.random() - 0.5);
            
            const optionsContainer = document.getElementById('pattern-options');
            optionsContainer.innerHTML = '';
            
            options.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = 'pattern-option';
                btn.textContent = opt;
                btn.onclick = () => checkPattern(opt, btn);
                optionsContainer.appendChild(btn);
            });
        }
        
        function checkPattern(answer, btn) {
            document.querySelectorAll('.pattern-option').forEach(b => b.onclick = null);
            
            if (answer === patternAnswer) {
                btn.classList.add('correct');
                patternScore++;
                score += 30;
                algorithmsLearned.add('pattern-recognition');
                document.getElementById('pattern-score').textContent = patternScore;
                updateStats();
            } else {
                btn.classList.add('wrong');
                document.querySelectorAll('.pattern-option').forEach(b => {
                    if (parseInt(b.textContent) === patternAnswer) {
                        b.classList.add('correct');
                    }
                });
            }
        }
        
        // ============ PATHFINDING ============
        let pathGrid = [];
        const ROWS = 10;
        const COLS = 12;
        let startPos = { r: 0, c: 0 };
        let endPos = { r: ROWS - 1, c: COLS - 1 };
        let pathfinding = false;
        
        function initPath() {
            newMaze();
        }
        
        function newMaze() {
            pathGrid = [];
            for (let r = 0; r < ROWS; r++) {
                pathGrid[r] = [];
                for (let c = 0; c < COLS; c++) {
                    pathGrid[r][c] = Math.random() < 0.25 ? 1 : 0; // 1 = wall
                }
            }
            
            startPos = { r: 0, c: 0 };
            endPos = { r: ROWS - 1, c: COLS - 1 };
            pathGrid[startPos.r][startPos.c] = 0;
            pathGrid[endPos.r][endPos.c] = 0;
            
            renderPathGrid();
            document.getElementById('path-steps').textContent = '0';
            document.getElementById('path-status').textContent = 'Click "Find Path" to start!';
        }
        
        function renderPathGrid() {
            const container = document.getElementById('path-grid');
            container.innerHTML = '';
            
            for (let r = 0; r < ROWS; r++) {
                for (let c = 0; c < COLS; c++) {
                    const cell = document.createElement('div');
                    cell.className = 'path-cell';
                    cell.id = `path-${r}-${c}`;
                    
                    if (r === startPos.r && c === startPos.c) {
                        cell.classList.add('start');
                        cell.textContent = 'üöÄ';
                    } else if (r === endPos.r && c === endPos.c) {
                        cell.classList.add('end');
                        cell.textContent = 'üéØ';
                    } else if (pathGrid[r][c] === 1) {
                        cell.classList.add('wall');
                    }
                    
                    cell.onclick = () => toggleWall(r, c);
                    container.appendChild(cell);
                }
            }
        }
        
        function toggleWall(r, c) {
            if (pathfinding) return;
            if ((r === startPos.r && c === startPos.c) || (r === endPos.r && c === endPos.c)) return;
            
            pathGrid[r][c] = pathGrid[r][c] === 0 ? 1 : 0;
            renderPathGrid();
        }
        
        function clearPath() {
            document.querySelectorAll('.path-cell').forEach(cell => {
                cell.classList.remove('visited', 'path', 'current');
            });
            document.getElementById('path-steps').textContent = '0';
            document.getElementById('path-status').textContent = 'Path cleared!';
        }
        
        async function findPath() {
            if (pathfinding) return;
            pathfinding = true;
            document.getElementById('path-btn').disabled = true;
            clearPath();
            
            // BFS
            const queue = [{ r: startPos.r, c: startPos.c, path: [] }];
            const visited = new Set();
            visited.add(`${startPos.r},${startPos.c}`);
            
            let steps = 0;
            const directions = [[0,1], [1,0], [0,-1], [-1,0]];
            
            while (queue.length > 0) {
                const current = queue.shift();
                steps++;
                document.getElementById('path-steps').textContent = steps;
                
                // Visualize
                const cell = document.getElementById(`path-${current.r}-${current.c}`);
                if (current.r !== startPos.r || current.c !== startPos.c) {
                    cell.classList.add('current');
                    await sleep(50);
                    cell.classList.remove('current');
                    cell.classList.add('visited');
                }
                
                // Found?
                if (current.r === endPos.r && current.c === endPos.c) {
                    // Draw path
                    document.getElementById('path-status').textContent = `‚úÖ Path found! Length: ${current.path.length + 1}`;
                    
                    for (const pos of current.path) {
                        document.getElementById(`path-${pos.r}-${pos.c}`).classList.add('path');
                        await sleep(50);
                    }
                    
                    score += 75;
                    algorithmsLearned.add('pathfinding');
                    updateStats();
                    
                    pathfinding = false;
                    document.getElementById('path-btn').disabled = false;
                    return;
                }
                
                // Explore neighbors
                for (const [dr, dc] of directions) {
                    const nr = current.r + dr;
                    const nc = current.c + dc;
                    
                    if (nr >= 0 && nr < ROWS && nc >= 0 && nc < COLS && 
                        pathGrid[nr][nc] === 0 && !visited.has(`${nr},${nc}`)) {
                        visited.add(`${nr},${nc}`);
                        queue.push({ 
                            r: nr, 
                            c: nc, 
                            path: [...current.path, { r: current.r, c: current.c }] 
                        });
                    }
                }
            }
            
            document.getElementById('path-status').textContent = '‚ùå No path found! Try removing some walls.';
            pathfinding = false;
            document.getElementById('path-btn').disabled = false;
        }
        
        // Helpers
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        // Speed slider
        document.getElementById('speed-slider').addEventListener('input', (e) => {
            const speeds = ['Very Slow', 'Slow', 'Medium Slow', 'Medium', 'Medium', 'Medium Fast', 'Fast', 'Very Fast', 'Super Fast', 'Instant'];
            document.getElementById('speed-display').textContent = speeds[e.target.value - 1];
        });
        
        // Initialize all
        initSort();
        initSearch();
        newPattern();
        initPath();
    </script>
    <footer style="background: #1a1a2e; color: white; padding: 20px; text-align: center; margin-top: 40px;">
        <p style="margin: 0; opacity: 0.8;">Made with ‚ù§Ô∏è by Tech Explorers | <a href="../index.html" style="color: #06d6a0;">Home</a> | <a href="../activities/all-activities.html" style="color: #06d6a0;">More Activities</a></p>
    </footer>
</body>
</html>
